<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Autoware_Doxygen: Prerequisites</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Autoware_Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_deng_Project_autobot-feature-decision_ros_src_sensing_drivers_imu_packages_xsens_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Prerequisites </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>Install the MTi USB Serial Driver <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ git clone https://github.com/xsens/xsens_mt.git</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ cd ~/xsens_mt</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;$ make</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;$ sudo modprobe usbserial</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;$ sudo insmod ./xsens_mt.ko</div></div><!-- fragment --></li>
<li>Install gps_common <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ sudo apt-get install ros-distro-gps-common</div></div><!-- fragment --></li>
</ul>
<h1>Running the Xsens MTi ROS Node</h1>
<ol type="1">
<li>Copy the contents of the src folder into your catkin workspace 'src' folder. Make sure the permissions are set to <em>o+rw</em> on your files and directories. For details on creating a catkin workspace environment refer to <a href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment#Create_a_ROS_Workspace">Creating a catkin ws</a></li>
<li>in your catkin_ws ($CATKIN) folder, execute <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ catkin_make</div></div><!-- fragment --></li>
<li>Source the environment for each terminal you work in. If necessary, add the line to your .bashrc <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;. $CATKIN/devel/setup.bash</div></div><!-- fragment --></li>
<li>Initiate the ros core <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ roscore</div></div><!-- fragment --></li>
<li>Open a new terminal, type <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ . $CATKIN/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ rosrun xsens_driver mtdevice.py -m $sm -f $fs # publish sensor data</div></div><!-- fragment --> where $fs can be 1,5,10,20,40,50,80,100,200 or 400Hz. This configures the MTi to output inertial data and magnetometer data at the set ODR. The maximum supported inertial update rate is 400Hz and for the magnetometer it is 100Hz. The $sm can be set to 1,2 or 3. This can be used to set the sensor to output sensor data or filter outputs.</li>
<li>To run the node <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ rosrun xsens_driver mtnode.py _device:=/dev/ttyUSB0 _baudrate:=115200</div></div><!-- fragment --> or <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ rosrun xsens_driver mtnode.py </div></div><!-- fragment --></li>
<li>Open a new terminal (do not forget step 3) <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ . $CATKIN/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ rostopic echo /mti/sensor/sample</div></div><!-- fragment --> or <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ . $CATKIN/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ rostopic echo /mti/sensor/imu</div></div><!-- fragment --></li>
</ol>
<h1>Troubleshooting</h1>
<ul>
<li><p class="startli">The Mti1 (Motion Tracker Development Board) is not recognized. Support for the Development Board is present in recent kernels. (Since June 12, 2015).If your kernel does not support the Board, you can add this manually</p>
<p class="startli">$ sudo /sbin/modprobe ftdi_sio $ echo 2639 0300 | sudo tee /sys/bus/usb-serial/drivers/ftdi_sio/new_id</p>
</li>
<li><p class="startli">The device is recognized, but I cannot ever access the device Make sure you are in the correct group (often dialout or uucp) in order to access the device. You can test this with </p><pre class="fragment">  $ ls -l /dev/ttyUSB0
  crw-rw---- 1 root dialout 188, 0 May  6 16:21 /dev/ttyUSB0
  $ groups
  dialout audio video usb users plugdev
</pre><p class="startli">If you aren't in the correct group, you can fix this in two ways.</p><ol type="1">
<li><p class="startli">Add yourself to the correct group You can add yourself to it by using your distributions user management tool, or call </p><pre class="fragment">$ sudo usermod -G dialout -a $USER
</pre><p class="startli">Be sure to replace dialout with the actual group name if it is different. After adding yourself to the group, either relogin to your user, or call </p><pre class="fragment">$ newgrp dialout
</pre><p class="startli">to add the current terminal session to the group.</p>
</li>
<li><p class="startli">Use udev rules Alternatively, put the following rule into /etc/udev/rules.d/99-custom.rules </p><pre class="fragment">SUBSYSTEM=="tty", ATTRS{idVendor}=="2639", ACTION=="add", GROUP="$GROUP", MODE="0660"
</pre><p class="startli">Change $GROUP into your desired group (e.g. adm, plugdev, or usb).</p>
</li>
</ol>
</li>
<li>The device is inaccessible for a while after plugging it in When having problems with the device being busy the first 20 seconds after plugin, purge the modemmanager application. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
